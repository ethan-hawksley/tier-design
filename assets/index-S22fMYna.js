(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function ie(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),t&&(r.href=t),i.href=e,i.href}const se=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function b(e){const t=[];for(let n=0,r=e.length;n<r;n++)t.push(e[n]);return t}let p=null;function _(e={}){return p||(e.includeStyleProperties?(p=e.includeStyleProperties,p):(p=b(window.getComputedStyle(document.documentElement)),p))}function T(e,t){const r=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return r?parseFloat(r.replace("px","")):0}function ae(e){const t=T(e,"border-left-width"),n=T(e,"border-right-width");return e.clientWidth+t+n}function oe(e){const t=T(e,"border-top-width"),n=T(e,"border-bottom-width");return e.clientHeight+t+n}function z(e,t={}){const n=t.width||ae(e),r=t.height||oe(e);return{width:n,height:r}}function ce(){let e,t;try{t=process}catch{}const n=t&&t.env?t.env.devicePixelRatio:null;return n&&(e=parseInt(n,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const m=16384;function le(e){(e.width>m||e.height>m)&&(e.width>m&&e.height>m?e.width>e.height?(e.height*=m/e.width,e.width=m):(e.width*=m/e.height,e.height=m):e.width>m?(e.height*=m/e.width,e.width=m):(e.width*=m/e.height,e.height=m))}function ue(e,t={}){return e.toBlob?new Promise(n=>{e.toBlob(n,t.type?t.type:"image/png",t.quality?t.quality:1)}):new Promise(n=>{const r=window.atob(e.toDataURL(t.type?t.type:void 0,t.quality?t.quality:void 0).split(",")[1]),i=r.length,s=new Uint8Array(i);for(let a=0;a<i;a+=1)s[a]=r.charCodeAt(a);n(new Blob([s],{type:t.type?t.type:"image/png"}))})}function v(e){return new Promise((t,n)=>{const r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>t(r))})},r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=e})}async function de(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function fe(e,t,n){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),s=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${t}`),i.setAttribute("height",`${n}`),i.setAttribute("viewBox",`0 0 ${t} ${n}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),i.appendChild(s),s.appendChild(e),de(i)}const f=(e,t)=>{if(e instanceof t)return!0;const n=Object.getPrototypeOf(e);return n===null?!1:n.constructor.name===t.name||f(n,t)};function me(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function ge(e,t){return _(t).map(n=>{const r=e.getPropertyValue(n),i=e.getPropertyPriority(n);return`${n}: ${r}${i?" !important":""};`}).join(" ")}function he(e,t,n,r){const i=`.${e}:${t}`,s=n.cssText?me(n):ge(n,r);return document.createTextNode(`${i}{${s}}`)}function O(e,t,n,r){const i=window.getComputedStyle(e,n),s=i.getPropertyValue("content");if(s===""||s==="none")return;const a=se();try{t.className=`${t.className} ${a}`}catch{return}const o=document.createElement("style");o.appendChild(he(a,n,i,r)),t.appendChild(o)}function ye(e,t,n){O(e,t,":before",n),O(e,t,":after",n)}const M="application/font-woff",B="image/jpeg",be={woff:M,woff2:M,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:B,jpeg:B,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function we(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function $(e){const t=we(e).toLowerCase();return be[t]||""}function pe(e){return e.split(/,/)[1]}function F(e){return e.search(/^(data:)/)!==-1}function Ee(e,t){return`data:${t};base64,${e}`}async function G(e,t,n){const r=await fetch(e,t);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const i=await r.blob();return new Promise((s,a)=>{const o=new FileReader;o.onerror=a,o.onloadend=()=>{try{s(n({res:r,result:o.result}))}catch(c){a(c)}},o.readAsDataURL(i)})}const P={};function Se(e,t,n){let r=e.replace(/\?.*/,"");return n&&(r=e),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),t?`[${t}]${r}`:r}async function D(e,t,n){const r=Se(e,t,n.includeQueryParams);if(P[r]!=null)return P[r];n.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let i;try{const s=await G(e,n.fetchRequestInit,({res:a,result:o})=>(t||(t=a.headers.get("Content-Type")||""),pe(o)));i=Ee(s,t)}catch(s){i=n.imagePlaceholder||"";let a=`Failed to fetch resource: ${e}`;s&&(a=typeof s=="string"?s:s.message),a&&console.warn(a)}return P[r]=i,i}async function xe(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):v(t)}async function Ie(e,t){if(e.currentSrc){const s=document.createElement("canvas"),a=s.getContext("2d");s.width=e.clientWidth,s.height=e.clientHeight,a?.drawImage(e,0,0,s.width,s.height);const o=s.toDataURL();return v(o)}const n=e.poster,r=$(n),i=await D(n,r,t);return v(i)}async function Le(e,t){var n;try{if(!((n=e?.contentDocument)===null||n===void 0)&&n.body)return await k(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function Re(e,t){return f(e,HTMLCanvasElement)?xe(e):f(e,HTMLVideoElement)?Ie(e,t):f(e,HTMLIFrameElement)?Le(e,t):e.cloneNode(X(e))}const Ce=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",X=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function Te(e,t,n){var r,i;if(X(t))return t;let s=[];return Ce(e)&&e.assignedNodes?s=b(e.assignedNodes()):f(e,HTMLIFrameElement)&&(!((r=e.contentDocument)===null||r===void 0)&&r.body)?s=b(e.contentDocument.body.childNodes):s=b(((i=e.shadowRoot)!==null&&i!==void 0?i:e).childNodes),s.length===0||f(e,HTMLVideoElement)||await s.reduce((a,o)=>a.then(()=>k(o,n)).then(c=>{c&&t.appendChild(c)}),Promise.resolve()),t}function ve(e,t,n){const r=t.style;if(!r)return;const i=window.getComputedStyle(e);i.cssText?(r.cssText=i.cssText,r.transformOrigin=i.transformOrigin):_(n).forEach(s=>{let a=i.getPropertyValue(s);s==="font-size"&&a.endsWith("px")&&(a=`${Math.floor(parseFloat(a.substring(0,a.length-2)))-.1}px`),f(e,HTMLIFrameElement)&&s==="display"&&a==="inline"&&(a="block"),s==="d"&&t.getAttribute("d")&&(a=`path(${t.getAttribute("d")})`),r.setProperty(s,a,i.getPropertyPriority(s))})}function ke(e,t){f(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),f(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function Pe(e,t){if(f(e,HTMLSelectElement)){const n=t,r=Array.from(n.children).find(i=>e.value===i.getAttribute("value"));r&&r.setAttribute("selected","")}}function Fe(e,t,n){return f(t,Element)&&(ve(e,t,n),ye(e,t,n),ke(e,t),Pe(e,t)),t}async function Ue(e,t){const n=e.querySelectorAll?e.querySelectorAll("use"):[];if(n.length===0)return e;const r={};for(let s=0;s<n.length;s++){const o=n[s].getAttribute("xlink:href");if(o){const c=e.querySelector(o),u=document.querySelector(o);!c&&u&&!r[o]&&(r[o]=await k(u,t,!0))}}const i=Object.values(r);if(i.length){const s="http://www.w3.org/1999/xhtml",a=document.createElementNS(s,"svg");a.setAttribute("xmlns",s),a.style.position="absolute",a.style.width="0",a.style.height="0",a.style.overflow="hidden",a.style.display="none";const o=document.createElementNS(s,"defs");a.appendChild(o);for(let c=0;c<i.length;c++)o.appendChild(i[c]);e.appendChild(a)}return e}async function k(e,t,n){return!n&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(r=>Re(r,t)).then(r=>Te(e,r,t)).then(r=>Fe(e,r,t)).then(r=>Ue(r,t))}const K=/url\((['"]?)([^'"]+?)\1\)/g,$e=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,De=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Ae(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function Oe(e){const t=[];return e.replace(K,(n,r,i)=>(t.push(i),n)),t.filter(n=>!F(n))}async function Me(e,t,n,r,i){try{const s=n?ie(t,n):t,a=$(t);let o;return i||(o=await D(s,a,r)),e.replace(Ae(t),`$1${o}$3`)}catch{}return e}function Be(e,{preferredFontFormat:t}){return t?e.replace(De,n=>{for(;;){const[r,,i]=$e.exec(n)||[];if(!i)return"";if(i===t)return`src: ${r};`}}):e}function J(e){return e.search(K)!==-1}async function Q(e,t,n){if(!J(e))return e;const r=Be(e,n);return Oe(r).reduce((s,a)=>s.then(o=>Me(o,a,t,n)),Promise.resolve(r))}async function E(e,t,n){var r;const i=(r=t.style)===null||r===void 0?void 0:r.getPropertyValue(e);if(i){const s=await Q(i,null,n);return t.style.setProperty(e,s,t.style.getPropertyPriority(e)),!0}return!1}async function He(e,t){await E("background",e,t)||await E("background-image",e,t),await E("mask",e,t)||await E("-webkit-mask",e,t)||await E("mask-image",e,t)||await E("-webkit-mask-image",e,t)}async function Ve(e,t){const n=f(e,HTMLImageElement);if(!(n&&!F(e.src))&&!(f(e,SVGImageElement)&&!F(e.href.baseVal)))return;const r=n?e.src:e.href.baseVal,i=await D(r,$(r),t);await new Promise((s,a)=>{e.onload=s,e.onerror=t.onImageErrorHandler?(...c)=>{try{s(t.onImageErrorHandler(...c))}catch(u){a(u)}}:a;const o=e;o.decode&&(o.decode=s),o.loading==="lazy"&&(o.loading="eager"),n?(e.srcset="",e.src=i):e.href.baseVal=i})}async function qe(e,t){const r=b(e.childNodes).map(i=>Z(i,t));await Promise.all(r).then(()=>e)}async function Z(e,t){f(e,Element)&&(await He(e,t),await Ve(e,t),await qe(e,t))}function We(e,t){const{style:n}=e;t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width=`${t.width}px`),t.height&&(n.height=`${t.height}px`);const r=t.style;return r!=null&&Object.keys(r).forEach(i=>{n[i]=r[i]}),e}const H={};async function V(e){let t=H[e];if(t!=null)return t;const r=await(await fetch(e)).text();return t={url:e,cssText:r},H[e]=t,t}async function q(e,t){let n=e.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,s=(n.match(/url\([^)]+\)/g)||[]).map(async a=>{let o=a.replace(r,"$1");return o.startsWith("https://")||(o=new URL(o,e.url).href),G(o,t.fetchRequestInit,({result:c})=>(n=n.replace(a,`url(${c})`),[a,c]))});return Promise.all(s).then(()=>n)}function W(e){if(e==null)return[];const t=[],n=/(\/\*[\s\S]*?\*\/)/gi;let r=e.replace(n,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const c=i.exec(r);if(c===null)break;t.push(c[0])}r=r.replace(i,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,a="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",o=new RegExp(a,"gi");for(;;){let c=s.exec(r);if(c===null){if(c=o.exec(r),c===null)break;s.lastIndex=o.lastIndex}else o.lastIndex=s.lastIndex;t.push(c[0])}return t}async function je(e,t){const n=[],r=[];return e.forEach(i=>{if("cssRules"in i)try{b(i.cssRules||[]).forEach((s,a)=>{if(s.type===CSSRule.IMPORT_RULE){let o=a+1;const c=s.href,u=V(c).then(d=>q(d,t)).then(d=>W(d).forEach(g=>{try{i.insertRule(g,g.startsWith("@import")?o+=1:i.cssRules.length)}catch(I){console.error("Error inserting rule from remote css",{rule:g,error:I})}})).catch(d=>{console.error("Error loading remote css",d.toString())});r.push(u)}})}catch(s){const a=e.find(o=>o.href==null)||document.styleSheets[0];i.href!=null&&r.push(V(i.href).then(o=>q(o,t)).then(o=>W(o).forEach(c=>{a.insertRule(c,a.cssRules.length)})).catch(o=>{console.error("Error loading remote stylesheet",o)})),console.error("Error inlining remote css file",s)}}),Promise.all(r).then(()=>(e.forEach(i=>{if("cssRules"in i)try{b(i.cssRules||[]).forEach(s=>{n.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${i.href}`,s)}}),n))}function _e(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>J(t.style.getPropertyValue("src")))}async function ze(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=b(e.ownerDocument.styleSheets),r=await je(n,t);return _e(r)}function Y(e){return e.trim().replace(/["']/g,"")}function Ge(e){const t=new Set;function n(r){(r.style.fontFamily||getComputedStyle(r).fontFamily).split(",").forEach(s=>{t.add(Y(s))}),Array.from(r.children).forEach(s=>{s instanceof HTMLElement&&n(s)})}return n(e),t}async function Xe(e,t){const n=await ze(e,t),r=Ge(e);return(await Promise.all(n.filter(s=>r.has(Y(s.style.fontFamily))).map(s=>{const a=s.parentStyleSheet?s.parentStyleSheet.href:null;return Q(s.cssText,a,t)}))).join(`
`)}async function Ke(e,t){const n=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await Xe(e,t);if(n){const r=document.createElement("style"),i=document.createTextNode(n);r.appendChild(i),e.firstChild?e.insertBefore(r,e.firstChild):e.appendChild(r)}}async function Je(e,t={}){const{width:n,height:r}=z(e,t),i=await k(e,t,!0);return await Ke(i,t),await Z(i,t),We(i,t),await fe(i,n,r)}async function Qe(e,t={}){const{width:n,height:r}=z(e,t),i=await Je(e,t),s=await v(i),a=document.createElement("canvas"),o=a.getContext("2d"),c=t.pixelRatio||ce(),u=t.canvasWidth||n,d=t.canvasHeight||r;return a.width=u*c,a.height=d*c,t.skipAutoScale||le(a),a.style.width=`${u}`,a.style.height=`${d}`,t.backgroundColor&&(o.fillStyle=t.backgroundColor,o.fillRect(0,0,a.width,a.height)),o.drawImage(s,0,0,a.width,a.height),a}async function Ze(e,t={}){const n=await Qe(e,t);return await ue(n)}const l={title:"Tier List Title",tiers:[{id:0,label:"S",colour:"#ff7f80",items:[]},{id:1,label:"A",colour:"#ffc07f",items:[]},{id:2,label:"B",colour:"#ffdf7f",items:[]},{id:3,label:"C",colour:"#ffff7f",items:[]},{id:4,label:"D",colour:"#bfff7f",items:[]},{id:5,label:"F",colour:"#7fff7f",items:[]}],unrankedItems:[]};function N(e,t){const n=document.createElement("div");if(n.classList.add("draggable-item"),n.draggable=!0,"text"in e)n.textContent=e.text,n.classList.add("draggable-item-text");else if("src"in e){const r=document.createElement("img");r.src=e.src,n.replaceChildren(r)}return n.dataset.id=e.id.toString(),n.addEventListener("dragstart",r=>{r.dataTransfer.setData("text",e.id.toString())}),n.addEventListener("contextmenu",r=>{r.preventDefault(),t()}),n}function Ye(e,t,n){const r=document.createElement("div");r.classList.add("tier-row");const i=document.createElement("input");i.classList.add("tier-label"),i.style.backgroundColor=e.colour,i.value=e.label,i.addEventListener("change",()=>{const a={...e,label:i.value};t(a)}),i.addEventListener("contextmenu",a=>{a.preventDefault(),n()});const s=document.createElement("div");s.classList.add("ranked-items-row"),s.dataset.id=e.id.toString(),s.addEventListener("dragover",a=>{a.preventDefault()});for(let a=0;a<e.items.length;a++){const o=e.items[a],c=N(o,()=>{const u={...e,items:e.items.filter(d=>d.id!==o.id)};"src"in o&&URL.revokeObjectURL(o.src),t(u)});s.append(c)}return r.append(i,s),r}function Ne(e,t){const n=document.createElement("div");n.classList.add("unranked-items-row"),n.addEventListener("dragover",r=>{r.preventDefault()});for(let r=0;r<e.length;r++){const i=e[r],s=N(i,()=>{const a=e.filter(o=>o.id!==i.id);t(a)});n.append(s)}return n}function h(e){const t=document.querySelector(e);if(!t)throw new Error("Element cannot be found");return t}function x(e,t){return[...e,t]}function R(e,t,n){return[...e.slice(0,n),t,...e.slice(n)]}function U(e,t,n){return[...e.slice(0,n),t,...e.slice(n+1)]}function et(e,t){return[...e.slice(0,t),...e.slice(t+1)]}const C=h("#tier-list"),tt=h("#save-button"),nt=h("#copy-button"),w=h("#tier-list-title"),rt=h("#tier-list-container"),ee=h("#unranked-items-container"),it=h("#add-text-button"),st=h("#add-images-button"),S=h("#images-input"),at=h("#add-tier-button");function y(){w.textContent=l.title;const e=document.createDocumentFragment();for(let n=0;n<l.tiers.length;n++){const r=l.tiers[n],i=Ye(r,s=>{l.tiers=U(l.tiers,s,n),y()},()=>{for(const s of r.items)"src"in s&&s.src.startsWith("blob:")&&URL.revokeObjectURL(s.src);l.tiers=et(l.tiers,n),y()});e.append(i)}rt.replaceChildren(e);const t=Ne(l.unrankedItems,n=>{l.unrankedItems=n,y()});ee.replaceChildren(t)}w.addEventListener("keydown",e=>{e.key==="Enter"&&e.preventDefault()});w.addEventListener("blur",()=>{l.title=w.textContent,y()});const ot=document.getElementById("app");ot.addEventListener("drop",e=>{e.preventDefault();const t=e.target,n=t.closest(".ranked-items-row, .unranked-items-row");if(!n)return;const r=Number(e.dataTransfer.getData("text"));if(Number.isNaN(r))return;const i=l.tiers.findIndex(u=>u.items.some(d=>d.id===r)),s=Number(n?.dataset.id),a=l.tiers.findIndex(u=>u.id===s),o=i>=0?l.tiers[i].items.find(u=>u.id===r):l.unrankedItems.find(u=>u.id===r);if(!o)throw new Error("Tier Item unexpectedly missing");const c=t.closest(".draggable-item");if(!(c?.classList.contains("draggable-item")&&Number(c?.dataset.id)===r)){if(i>=0){const u=l.tiers[i],d={...u,items:u.items.filter(g=>g.id!==r)};l.tiers=U(l.tiers,d,i)}else l.unrankedItems=l.unrankedItems.filter(u=>u.id!==r);if(a>=0){const u=l.tiers[a];let d;if(c?.classList.contains("draggable-item")){const I=Number(c.dataset.id),L=u.items.findIndex(re=>re.id===I),A=c.getBoundingClientRect();e.clientX<A.x+A.width/2?d=R(u.items,o,L):d=R(u.items,o,L+1)}else d=x(u.items,o);const g={...u,items:d};l.tiers=U(l.tiers,g,a)}else if(c?.classList.contains("draggable-item")){const u=Number(c.dataset.id),d=l.unrankedItems.findIndex(L=>L.id===u),g=c.getBoundingClientRect();e.clientX<g.x+g.width/2?l.unrankedItems=R(l.unrankedItems,o,d):l.unrankedItems=R(l.unrankedItems,o,d+1)}else l.unrankedItems=x(l.unrankedItems,o);y()}});function j(e){return e.reduce((t,n)=>Math.max(n.id,t),-1/0)}function te(){const e=l.tiers.reduce((n,r)=>Math.max(j(r.items),n),0),t=j(l.unrankedItems);return Math.max(e,t)+1}async function ct(e){return await new Promise((t,n)=>{const r=new FileReader;r.onerror=()=>{r.abort(),n(new Error("Failed to read blob as data URL"))},r.onload=()=>t(r.result),r.readAsDataURL(e)})}it.addEventListener("click",()=>{const e=prompt("Enter text:");if(e){const t={id:te(),type:"text",text:e};l.unrankedItems=x(l.unrankedItems,t),y()}});st.addEventListener("click",()=>{S.click()});S.addEventListener("change",async()=>{if(S.files){for(const e of S.files)try{const t=URL.createObjectURL(e),n={id:te(),type:"image",src:t};l.unrankedItems=x(l.unrankedItems,n)}catch(t){console.error("Failed to load image file:",t)}S.value="",y()}});function lt(){return l.tiers.reduce((t,n)=>Math.max(t,n.id),0)+1}at.addEventListener("click",()=>{const e=prompt("Enter label:");if(!e)return;const t=prompt("Enter colour code:");if(!t)return;const n={id:lt(),label:e,colour:t,items:[]};l.tiers=x(l.tiers,n),y()});async function ut(e){const t=Array.from(e.querySelectorAll("img")),n=new Map;return await Promise.all(t.map(async r=>{const i=r.src;if(i.startsWith("blob:")){n.set(r,i);try{const a=await(await fetch(i)).blob();r.src=await ct(a)}catch(s){console.error("Failed to convert blob URL to data URL for html-to-image:",s)}}})),n}function dt(e){for(const[t,n]of e.entries())t.src=n}async function ne(){document.activeElement===w&&w.blur();const t=getComputedStyle(C).backgroundColor,n=await ut(C);try{const r=await Ze(C,{backgroundColor:t});if(!r)throw new Error("Failed to render tier list as blob");return r}finally{dt(n)}}tt.addEventListener("click",async()=>{try{const e=await ne(),t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=w.textContent||"tier-list",n.click(),URL.revokeObjectURL(t)}catch(e){console.error("Error saving tier list:",e)}});nt.addEventListener("click",async()=>{try{const e=await ne();await navigator.clipboard.write([new ClipboardItem({[e.type]:e})])}catch(e){console.error("Error copying tier list:",e)}});C.addEventListener("contextmenu",e=>{e.preventDefault()});ee.addEventListener("contextmenu",e=>{e.preventDefault()});y();
